var path = require("path");

/**
 * GET /assets/js/mvc/loginpage/AccountChooser.js
 *
 * host: rain.okta1.com:1802
 * connection: keep-alive
 * user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:48.0) Gecko/20100101 Firefox/48.0
 * accept: * / *
 * accept-encoding: gzip
 * accept-language: en-US
 * cookie: DT=DI0jRgRLD_uQBqSzCUCxXy5OA; t=default; JSESSIONID=C8CAB112A54DECAB36F64A605FA44B2A
 * cache-control: no-cache, no-store
 * pragma: no-cache
 */

module.exports = function (req, res) {
  res.statusCode = 200;

  res.setHeader("server", "Apache-Coyote/1.1");
  res.setHeader("accept-ranges", "bytes");
  res.setHeader("etag", "W/\"2181-1477768984000\"");
  res.setHeader("last-modified", "Sat, 29 Oct 2016 19:23:04 GMT");
  res.setHeader("content-type", "text/javascript");
  res.setHeader("content-length", "2181");
  res.setHeader("date", "Sat, 05 Nov 2016 23:23:48 GMT");

  res.setHeader("x-yakbak-tape", path.basename(__filename, ".js"));

  res.write(new Buffer("LyogZXNsaW50IG9rdGEvbm8tdW5kZXJzY29yZS10ZW1wbGF0ZTowICovCgovLyBTaW1wbGUgY2xhc3MgdGhhdCBwb3N0cyBsb2dpbiBkYXRhIHRvIHRoZSBhY2NvdW50IGNob29zZXIgZGlzY292ZXJ5IHVybCBvbgovLyBzdWNjZXNzZnVsIGxvZ2lucy4gVGhpcyB1cmwgaXMgYSBjcm9zcyBvcmlnaW4gb2t0YSBkb21haW4gdGhhdCBjYW4gYmUKLy8gYWNjZXNzZWQgYnkgYW55IG9rdGEgb3JpZ2luIGludGVyZXN0ZWQgaW4gc2VlaW5nIHdoaWNoIGFjY291bnRzIHRoZSBjdXJyZW50Ci8vIHVzZXIgaGFzIHNpZ25lZCBpbnRvLgpkZWZpbmUoWydqcXVlcnknLCAndW5kZXJzY29yZSddLCBmdW5jdGlvbiAoJCwgXykgewoKICAvLyBNYXggdGltZSB0byB3YWl0IGZvciBhIHJlc3BvbnNlIGZyb20gYWNjb3VudCBjaG9vc2VyIGlmcmFtZSBhZnRlcgogIC8vIGxvZ2luIG1lc3NhZ2UgaXMgc2VudC4KICB2YXIgTUFYX1dBSVQgPSAxMDAwOwoKICB2YXIgaWZyYW1lVHBsID0gXy50ZW1wbGF0ZSgnXAogICAgPGlmcmFtZSBkYXRhLXNlPSJhY2NvdW50LWNob29zZXIiIHNyYz0ie3tzcmN9fSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9pZnJhbWU+XAogICcpOwoKICBmdW5jdGlvbiBBY2NvdW50Q2hvb3NlcihvcHRpb25zKSB7CiAgICB2YXIgaWZyYW1lID0gJChpZnJhbWVUcGwoeyBzcmM6IG9wdGlvbnMuZGlzY292ZXJ5VXJsIH0pKTsKICAgIHRoaXMuZGlzY292ZXJ5VXJsID0gb3B0aW9ucy5kaXNjb3ZlcnlVcmw7CiAgICB0aGlzLmlmcmFtZSA9IGlmcmFtZS5nZXQoMCk7CiAgICAkKGZ1bmN0aW9uICgpIHsKICAgICAgJCgnYm9keScpLmFwcGVuZChpZnJhbWUpOwogICAgfSk7CiAgfQoKICAvLyBQb3N0cyBsb2dpbiBtZXNzYWdlIHRvIGFjY291bnQgY2hvb3NlciBpZnJhbWUuIFRoZSBhY2NvdW50IGNob29zZXIKICAvLyB3aWxsIHN0b3JlIHRoaXMgZGF0YSBpbiBsb2NhbFN0b3JhZ2UgZm9yIGZ1dHVyZSBjcm9zcyBvcmlnaW4gYWNjZXNzLgogIEFjY291bnRDaG9vc2VyLnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VyUHJvZmlsZSwgY2IpIHsKICAgIHZhciBtc2csIG1hdGNoZXMsIHRhcmdldE9yaWdpbiwgbWF4VGltZW91dDsKCiAgICBtc2cgPSB7CiAgICAgIG1lc3NhZ2VUeXBlOiAnbG9naW4nLAogICAgICBkaXNwbGF5TmFtZTogdXNlclByb2ZpbGUuZmlyc3ROYW1lICsgJyAnICsgdXNlclByb2ZpbGUubGFzdE5hbWUsCiAgICAgIGxvZ2luOiB1c2VyUHJvZmlsZS5sb2dpbgogICAgfTsKCiAgICAvLyBBdXRvbWF0aWNhbGx5IHJlZGlyZWN0IGFmdGVyIE1BWF9XQUlUIG1zIGluIHRoZSBldmVudCB0aGF0IHRoZSBhY2NvdW50CiAgICAvLyBjaG9vc2VyIGRvbWFpbiBpcyB0b28gc2xvdyB0byByZXNwb25kLgogICAgbWF4VGltZW91dCA9IHNldFRpbWVvdXQoY2IsIE1BWF9XQUlUKTsKCiAgICBtYXRjaGVzID0gKG5ldyBSZWdFeHAoJ15odHRwcz86Ly9bXi9dKycpKS5leGVjKHRoaXMuZGlzY292ZXJ5VXJsKTsKICAgIHRhcmdldE9yaWdpbiA9IG1hdGNoZXMgPyBtYXRjaGVzWzBdIDogbnVsbDsKCiAgICBpZiAodGFyZ2V0T3JpZ2luKSB7CiAgICAgIC8vIDEuIFNldHVwIHRoZSByZXNwb25zZSBtZXNzYWdlIGhhbmRsZXIKICAgICAgJCh3aW5kb3cpLm9uKCdtZXNzYWdlLmFjY291bnRDaG9vc2VyJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAvLyBPbmx5IGxpc3RlbiB0byBtZXNzYWdlcyBmcm9tIHRoZSBkaXNjb3ZlcnkgZG9tYWluCiAgICAgICAgaWYgKGUub3JpZ2luYWxFdmVudC5vcmlnaW4gIT09IHRhcmdldE9yaWdpbikgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoZS5vcmlnaW5hbEV2ZW50LmRhdGEubWVzc2FnZVR5cGUgPT09ICdwcm9jZXNzZWRfbG9naW4nKSB7CiAgICAgICAgICAkKHdpbmRvdykub2ZmKCdtZXNzYWdlLmFjY291bnRDaG9vc2VyJyk7CiAgICAgICAgICBjbGVhclRpbWVvdXQobWF4VGltZW91dCk7CiAgICAgICAgICBjYigpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyAyLiBTZW5kIHRoZSB1c2VyIHByb2ZpbGUgZGF0YSB0byB0aGUgYWNjb3VudCBjaG9vc2VyIG9yaWdpbgogICAgICB0aGlzLmlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG1zZywgdGFyZ2V0T3JpZ2luKTsKICAgIH0KICB9OwoKICByZXR1cm4gQWNjb3VudENob29zZXI7Cgp9KTsK", "base64"));
  res.end();

  return __filename;
};

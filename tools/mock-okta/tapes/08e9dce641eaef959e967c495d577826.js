var path = require("path");

/**
 * GET /assets/js/mvc/loginpage/mobile-sso.js
 *
 * host: rain.okta1.com:1802
 * connection: keep-alive
 * user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:48.0) Gecko/20100101 Firefox/48.0
 * accept: * / *
 * accept-encoding: gzip
 * accept-language: en-US
 * cookie: DT=DI0jRgRLD_uQBqSzCUCxXy5OA; t=default; JSESSIONID=C8CAB112A54DECAB36F64A605FA44B2A
 * cache-control: no-cache, no-store
 * pragma: no-cache
 */

module.exports = function (req, res) {
  res.statusCode = 200;

  res.setHeader("server", "Apache-Coyote/1.1");
  res.setHeader("accept-ranges", "bytes");
  res.setHeader("etag", "W/\"3752-1477768984000\"");
  res.setHeader("last-modified", "Sat, 29 Oct 2016 19:23:04 GMT");
  res.setHeader("content-type", "text/javascript");
  res.setHeader("content-length", "3752");
  res.setHeader("date", "Sat, 05 Nov 2016 23:23:48 GMT");

  res.setHeader("x-yakbak-tape", path.basename(__filename, ".js"));

  res.write(new Buffer("Ly8gUG9ydGVkIG92ZXIgZnJvbSB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb246Ci8vIC9qcy9zZWN0aW9ucy9tb2JpbGUtc3NvLWxvZ2luLmpzCi8qIGVzbGludCBjYW1lbGNhc2U6IDAgKi8KZGVmaW5lKFsnanF1ZXJ5JywgJ2xvZ2lucGFnZS9VdGlsJywgJ2hhbmRsZWJhcnMnXSwgZnVuY3Rpb24gKCQsIFV0aWwsIEhhbmRsZWJhcnMpIHsKCiAgdmFyIHRwbCA9IEhhbmRsZWJhcnMuY29tcGlsZSwKICAgICAgdG9rZW5UcGwgPSB0cGwoJy9vYXV0aDIvdG9rZW4/Y2xpZW50X2lkPXt7Y2xpZW50SWR9fSZncmFudF90eXBlPXNlc3Npb24mY29kZT17e2NsaWVudENvZGV9fScpLAogICAgICBjb2RlVHBsID0gdHBsKCcvb2F1dGgyL2NvZGU/Y2xpZW50X2lkPXt7Y2xpZW50SWR9fScpLAogICAgICBva3RhU1NPVHBsID0gdHBsKCdva3Rhc3NvOi8vdjEvb2F1dGgvdmFsaWRhdGUve3t1c2VyQ29kZX19JyksCiAgICAgIG1vYmlsZUxpbmsgPSAnaHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL3VzL2FwcC9va3RhLW1vYmlsZS9pZDU4MDcwOTI1MT9tdD04JzsKCiAgcmV0dXJuIGZ1bmN0aW9uIGluaXRNb2JpbGVTU08oZnJvbVVyaSkgewoKICAgIHZhciBva3RhTW9iaWxlID0gewogICAgICBjbGllbnRDb2RlOiB1bmRlZmluZWQsCiAgICAgIHVzZXJDb2RlOiB1bmRlZmluZWQsCiAgICAgIHBvbGxJbnRlcnZhbDogNTAwMCwKICAgICAgdGltZW91dEludGVydmFsOiAzMDAwMCwKICAgICAgY2xpZW50SWQ6ICdjYXBoeGNRS1BPVk9JSlVHQVhJQycsCiAgICAgIHJlcXVpcmVVc2VyVHJpZ2dlcjogdHJ1ZSwKICAgICAgbWFudWFsTG9naW46IGZhbHNlCiAgICB9OwoKICAgIHZhciB0aW1lb3V0VGltZU1zOwoKICAgIHZhciBzY3JlZW5zID0gewogICAgICBhY2Nlc3NTY3JlZW5JZCA6ICdtb2JpbGVTU09fYWNjZXNzJywKICAgICAgb3BlbmluZ1NjcmVlbklkIDogJ21vYmlsZVNTT19vcGVuaW5nJywKICAgICAgdHJhZGl0aW9uYWxMb2dpblNjcmVlbklkIDogJ21vYmlsZVNTT190cmFkaXRpb25hbExvZ2luJywKICAgICAgZXJyb3JTY3JlZW5JZCA6ICdtb2JpbGVTU09fZXJyb3InCiAgICB9OwoKICAgIGZ1bmN0aW9uIHNob3dTY3JlZW4oc2NyZWVuSWQpIHsKICAgICAgJC5lYWNoKHNjcmVlbnMsIGZ1bmN0aW9uIChrZXksIHZhbCkgewogICAgICAgICQoJyMnICsgdmFsKS50b2dnbGUodmFsID09PSBzY3JlZW5JZCk7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVzZXJDb2RlU3VjY2Vzc0NhbGxiYWNrKHVzZXJDb2RlKSB7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gb2t0YVNTT1RwbCh7IHVzZXJDb2RlOiB1c2VyQ29kZSB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBwb2xsT25PQXV0aENvZGUoKSB7CiAgICAgIGlmIChva3RhTW9iaWxlLm1hbnVhbExvZ2luKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgY3VycmVudFRpbWVNcyA9IERhdGUubm93KCk7CiAgICAgIGlmICh0aW1lb3V0VGltZU1zICE9PSB1bmRlZmluZWQgJiYgY3VycmVudFRpbWVNcyA+IHRpbWVvdXRUaW1lTXMpIHsKICAgICAgICBzaG93U2NyZWVuKHNjcmVlbnMuZXJyb3JTY3JlZW5JZCk7CiAgICAgIH0KCiAgICAgIGlmIChva3RhTW9iaWxlLnRpbWVvdXRUaW1lTXMgPT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgY3VycmVudFRpbWVNcyA8PSAodGltZW91dFRpbWVNcyArICBva3RhTW9iaWxlLnRpbWVvdXRJbnRlcnZhbCAqIDEwKSkgewogICAgICAgICQuYWpheCh7CiAgICAgICAgICB0eXBlOiAnUE9TVCcsCiAgICAgICAgICB1cmw6IHRva2VuVHBsKHsgY2xpZW50SWQ6IG9rdGFNb2JpbGUuY2xpZW50SWQsIGNsaWVudENvZGU6IG9rdGFNb2JpbGUuY2xpZW50Q29kZSB9KSwKICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsCiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICBpZiAoZGF0YS5zZXNzaW9uICYmIGRhdGEuc2Vzc2lvbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgVXRpbC5wb3N0VG9VcmwoZnJvbVVyaSwgJCgnYm9keScpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KHBvbGxPbk9BdXRoQ29kZSwgb2t0YU1vYmlsZS5wb2xsSW50ZXJ2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2V0VGltZW91dChwb2xsT25PQXV0aENvZGUsIG9rdGFNb2JpbGUucG9sbEludGVydmFsKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgIH0KCiAgICBmdW5jdGlvbiByZXF1ZXN0T0F1dGhDb2RlKCkgewogICAgICB0aW1lb3V0VGltZU1zID0gRGF0ZS5ub3coKSArIG9rdGFNb2JpbGUudGltZW91dEludGVydmFsOwogICAgICAkLmFqYXgoewogICAgICAgIHR5cGU6ICdQT1NUJywKICAgICAgICB1cmw6IGNvZGVUcGwoeyBjbGllbnRJZDogb2t0YU1vYmlsZS5jbGllbnRJZCB9KSwKICAgICAgICBkYXRhVHlwZTogJ2pzb24nLAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBva3RhTW9iaWxlLmNsaWVudENvZGUgPSBkYXRhLmNsaWVudF9jb2RlOwogICAgICAgICAgb2t0YU1vYmlsZS51c2VyQ29kZSA9IGRhdGEudXNlcl9jb2RlOwogICAgICAgICAgc2hvd1NjcmVlbihzY3JlZW5zLm9wZW5pbmdTY3JlZW5JZCk7CiAgICAgICAgICBzZXRUaW1lb3V0KHBvbGxPbk9BdXRoQ29kZSwgb2t0YU1vYmlsZS5wb2xsSW50ZXJ2YWwpOwogICAgICAgICAgdXNlckNvZGVTdWNjZXNzQ2FsbGJhY2soZGF0YS51c2VyX2NvZGUpOwogICAgICAgIH0sCiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNob3dTY3JlZW4oc2NyZWVucy5lcnJvclNjcmVlbklkKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHNob3dUcmFkaXRpb25hbExvZ2luKCkgewogICAgICAvLyBOb3RlOiBUaGlzIGRpZmZlcnMgZnJvbSB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb24gaW4gdGhhdCBpdCBqdXN0CiAgICAgIC8vIHRvZ2dsZXMgdG8gdGhlIG5ldyBsb2dpbiBmbG93CiAgICAgIC8vIDEuIFJlbW92ZSBhbGwgc2NyZWVucwogICAgICBzaG93U2NyZWVuKCk7CiAgICAgIG9rdGFNb2JpbGUubWFudWFsTG9naW4gPSB0cnVlOwogICAgICAvLyAyLiBEaXNwbGF5IG5ldyBsb2dpbiBmbG93LCBtaW51cyBmb290ZXIKICAgICAgJCgnI3NpZ25pbi1jb250YWluZXInKS5zaG93KCk7CiAgICAgICQoJyNtb2JpbGVTU09fb3ZlcmxheScpLmhpZGUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICBpZiAob2t0YU1vYmlsZS5yZXF1aXJlVXNlclRyaWdnZXIgPT09IGZhbHNlKSB7CiAgICAgICAgb2t0YU1vYmlsZS5zaG93U2NyZWVuKHNjcmVlbnMub3BlbmluZ1NjcmVlbklkKTsKICAgICAgICByZXF1ZXN0T0F1dGhDb2RlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJCgnI21vYmlsZVNTT0xvZ2luQnV0dG9uJykuY2xpY2socmVxdWVzdE9BdXRoQ29kZSk7CiAgICAgIH0KCiAgICAgICQoJyNnZXRPa3RhTW9iaWxlQnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbW9iaWxlTGluazsKICAgICAgfSk7CgogICAgICAkKCcjdHJhZGl0aW9uYWxMb2dpbkJ1dHRvbiwgI3JldHVyblRvTG9naW5CdXR0b24nKS5jbGljayhzaG93VHJhZGl0aW9uYWxMb2dpbik7CiAgICB9CgogICAgJChpbml0KTsKCiAgfTsKCn0pOwo=", "base64"));
  res.end();

  return __filename;
};
